<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Tidy Verbs for OData API and STAC Requests — tidy_verbs • CopernicusDataspace</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tidy Verbs for OData API and STAC Requests — tidy_verbs"><meta name="description" content="Implementation of tidy generics for features supported by either OData or STAC
API requests.
They can be called on objects of either class: odata_request or stac_request.
The first is produced
by dse_odata_products_request() and dse_odata_bursts_request();
the latter by dse_stac_search_request()."><meta property="og:description" content="Implementation of tidy generics for features supported by either OData or STAC
API requests.
They can be called on objects of either class: odata_request or stac_request.
The first is produced
by dse_odata_products_request() and dse_odata_bursts_request();
the latter by dse_stac_search_request()."><meta property="og:image" content="https://pepijn-devries.github.io/CopernicusDataspace/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CopernicusDataspace</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Authentication.html">Authentication</a></li>
    <li><a class="dropdown-item" href="../articles/OData.html">Using the OData API</a></li>
    <li><a class="dropdown-item" href="../articles/SentinelHub.html">Using SentinelHub</a></li>
    <li><a class="dropdown-item" href="../articles/STAC.html">Using the STAC Catalogue</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pepijn-devries/CopernicusDataspace/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Tidy Verbs for OData API and STAC Requests</h1>
      <small class="dont-index">Source: <a href="https://github.com/pepijn-devries/CopernicusDataspace/blob/main/R/tidyverse.R" class="external-link"><code>R/tidyverse.R</code></a></small>
      <div class="d-none name"><code>tidy_verbs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Implementation of tidy generics for features supported by either OData or STAC
API requests.
They can be called on objects of either class: <code>odata_request</code> or <code>stac_request</code>.
The first is produced
by <code><a href="dse_odata_products_request.html">dse_odata_products_request()</a></code> and <code><a href="dse_odata_bursts.html">dse_odata_bursts_request()</a></code>;
the latter by <code><a href="dse_stac_search_request.html">dse_stac_search_request()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">filter.odata_request</span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span>, .by <span class="op">=</span> <span class="cn">NULL</span>, .preserve <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">filter.stac_request</span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span>, .by <span class="op">=</span> <span class="cn">NULL</span>, .preserve <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">compute.odata_request</span><span class="op">(</span><span class="va">x</span>, skip <span class="op">=</span> <span class="fl">0L</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">collect.odata_request</span><span class="op">(</span><span class="va">x</span>, skip <span class="op">=</span> <span class="fl">0L</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">collect.stac_request</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">arrange.odata_request</span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span>, .by_group <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">arrange.stac_request</span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span>, .by_group <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">slice_head.odata_request</span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span>, <span class="va">n</span>, <span class="va">prop</span>, by <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">slice_head.stac_request</span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span>, <span class="va">n</span>, <span class="va">prop</span>, by <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">select.odata_request</span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">select.stac_request</span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data-x">.data, x<a class="anchor" aria-label="anchor" href="#arg--data-x"></a></dt>
<dd><p>An object of either class <code>odata_request</code> or <code>stac_request</code>.
These are produced by
<code><a href="dse_odata_products_request.html">dse_odata_products_request()</a></code>, <code><a href="dse_odata_bursts.html">dse_odata_bursts_request()</a></code> and
<code><a href="dse_stac_search_request.html">dse_stac_search_request()</a></code></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Data masking expressions, or arguments passed to embedded functions</p></dd>


<dt id="arg-skip">skip<a class="anchor" aria-label="anchor" href="#arg-skip"></a></dt>
<dd><p>Number of rows to skip when collecting results. The API
never returns more than 20 rows. Specify the number of rows to skip
in order to get results beyond the first 20 rows.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Maximum number of rows to return.</p></dd>


<dt id="arg-by-by-by-group-preserve-prop">by, .by, .by_group, .preserve, prop<a class="anchor" aria-label="anchor" href="#arg-by-by-by-group-preserve-prop"></a></dt>
<dd><p>Arguments inherited from generic
<code>dplyr</code> functions. Ignored in the current context as either grouping
is not allowed for an OData API request or is otherwise not supported.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>All functions (except <code>collect()</code>) return a modified
<code>stac_request</code>/<code>odata_request</code>
object, containing the lazy tidy operations. <code>collect()</code> will return a
<code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code> yielding the result of the request.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>odata_request</code> and <code>stac_request</code> class objects use lazy evaluation.
This means that functions are only evaluated after calling <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">dplyr::collect()</a></code>
on a request.</p>
<p>Note that you should not call the functions exported in this package directly.
Instead, call the generics as declared in the <code>dplyr</code> package. This is
illustrated by the examples.</p><div class="section">
<h3 id="slice-head">Slice Head<a class="anchor" aria-label="anchor" href="#slice-head"></a></h3>


<p>In order to manage server traffic, the OData API never returns more than
20 rows. If you want to obtain results beyond the first 20 rows, you need
to specify the <code>skip</code> argument.</p>
<p>The STAC API limits its results to the first 10 rows. You can expand that limit
with <code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">dplyr::slice_head()</a></code>. For STAC the number of rows is capped at 10,000 records.</p>
</div>

<div class="section">
<h3 id="deviations">Deviations<a class="anchor" aria-label="anchor" href="#deviations"></a></h3>


<p>Due to limitations posed by the OData API, some tidyverse verbs deviate
from its tidy standards. Most notably:</p><ul><li><p><code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">dplyr::select()</a></code>: Cannot change the order of columns. It will only
affact which columns are selected. Also, tidy selection helpers like
<code><a href="https://dplyr.tidyverse.org/reference/reexports.html" class="external-link">dplyr::any_of()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/reexports.html" class="external-link">dplyr::all_of()</a></code> are NOT supported</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">dplyr::arrange()</a></code>: OData only allows to sort up to 32 columns.
Adding more columns will produce a warning.</p></li>
<li><p>Grouping is not supported</p></li>
<li><p>Only tidy methods documented on this page are supported for <code>odata_request</code>
and <code>stac_request</code> objects. If you want to apply the full spectrum of
tidyverse methods, call <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">dplyr::collect()</a></code> on the <code>stac_request</code>/<code>odata_request</code>
object first. That will return a normal <code>data.frame</code>, which can be
manipulated further.</p></li>
</ul></div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="dse_odata_products_request.html">dse_odata_products_request</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">filter</span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="va">Name</span>, <span class="st">"WRR"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">select</span><span class="op">(</span><span class="st">"Id"</span>, <span class="st">"Name"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">arrange</span><span class="op">(</span><span class="va">Id</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">Name</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">slice_head</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">collect</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="dse_stac_search_request.html">dse_stac_search_request</a></span><span class="op">(</span><span class="st">"sentinel-1-grd"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">filter</span><span class="op">(</span><span class="va">`sat:orbit_state`</span> <span class="op">==</span> <span class="st">"ascending"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">arrange</span><span class="op">(</span><span class="st">"id"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">collect</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pepijn de Vries, LVVN (Ministerie van Landbouw, Visserij, Voedselzekerheid en Natuur).</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

